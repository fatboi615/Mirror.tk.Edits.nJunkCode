#include "AutoWall.h"

#define    HITGROUP_GENERIC    0
#define    HITGROUP_HEAD        1
#define    HITGROUP_CHEST        2
#define    HITGROUP_STOMACH    3
#define HITGROUP_LEFTARM    4    
#define HITGROUP_RIGHTARM    5
#define HITGROUP_LEFTLEG    6
#define HITGROUP_RIGHTLEG    7
#define HITGROUP_GEAR        10

#include <stdio.h>
#include <string>
#include <iostream>

using namespace std;

class gysvgai {
public:
	string bexetzyqsa;
	gysvgai();
	int afrvcvqolejtn(int zdoxzte, double ickze, int qiaqfrrcuryoark, bool aalcqj, string odohjemmkm, int hawpgdsim, double pkudssqr, string tojctzcxdabab);

protected:
	string oihboijwr;
	double crwcqn;
	double qcnunyqilmgr;
	int rmmjklmocrqa;

	void bratjhztvobbwhp(int jmxpzap, bool rnuckub, string rjdkq);
	string seomrnjlfg(int pszdkkzdtn, double omofezshcotd, string yjuzel, bool ectljinpvinna);
	int vxehgoubzxijyzvnr(bool fxvavukrw, double wmvdlg, bool thglobget, int rhleltdxsdznkbt, double drbxfee, double xrwvrsr, string vyowho, string otzvduskmgrj, bool rxztmbdww, int evmvajmzkhde);

private:
	int zvfuvk;
	bool npueamppzd;
	double vxqozialtviwtlh;

	void xjtxqtpeaauxnlyesjir(string bxzehvnnmmzsza, int rmqsmrpt, int micostx);
	string furaneckiblhnqrojmm(int dfdwjne, string ejcaquqgk, bool vmjqwx, string qarejio, double finxeuc, string dbobpo, double eaiizxckvnisw, int gtaoebd, int xlydwgsndbgm);
	string itvjnrbepqmofywga(double dlanthhzxces, int rsypbtvbeifag, double mliiddae, string pwnztozykarhtv, int qyrysjsdtwzazjn, bool vwtszmbz, double vkckb, string myhzuxcou);
	double ucsnmcgksgnwlybvhyfkfzvs(int klgux, double dwarbvdi, bool pcnbxrdrndxio, bool zbawwkjwbb, string udhrbsqcuccwnmw);
	int ulnmhsdbpnebkdcfe(bool kxlsdlch, double ismepqxukm, bool wizrnbbd, bool vuzflhbasjdu, string eerrngl, bool zvsdinfpb, double ijpkguloeh, int hjspbc, int smtvabjunxqv, int qogkltxaqxys);
	double ueuemwuvptbajaorkyzunpaa(int asqvhflfzyi, double cvzlw, double lgmwuwtiivoi, string zhhwgpzoq, int nwipffzgs, double mwufidyvdv, double sslkkhblvxtevrg, int zpigb, double vtguwwfbfhg, string omhbcfmi);
	void zxiohgjwbnlsimtrpoqp(bool vmnrjz);
	int zalslwvnitwb(bool wuhedlwqgm, bool febimfahc, int qtguvumeaprqtiy, string xzeovngthuyshaz, double ngeokqxbp, string pbelworlectlf, int tsqalmgdq, bool dbcyxjcnd, double uarnvyvldqwfx, string vhblolnjakqb);
	int toqnqpvhzojgycgadbuxupmtx(string ynlroxp, int ydsxrpwdvsywr, string buolnoqwn, double bwszwmbaizsd, int rvnimgfoefmk, string ajsswewbfd);
	string oqrocgyumijmnj(double qbvxbxj, double jwqpj, int nhvxbcumlhuqc, string tbuxxn);

};



void gysvgai::xjtxqtpeaauxnlyesjir(string bxzehvnnmmzsza, int rmqsmrpt, int micostx) {
	string vqwujiep = "hoiivdravxcpnyofnjjpmdqddoykacbezyvxybwymnuhunlmnqcccwzhe";
	bool bvexw = true;
	bool lhukyoqwiggo = false;
	double gsubriccwzlaow = 3507;
	bool qtkwxmmywl = true;
	bool lhkjchueni = false;
	int lemxjif = 752;
	bool wwvkovghltc = false;

}

string gysvgai::furaneckiblhnqrojmm(int dfdwjne, string ejcaquqgk, bool vmjqwx, string qarejio, double finxeuc, string dbobpo, double eaiizxckvnisw, int gtaoebd, int xlydwgsndbgm) {
	double gozvnku = 182;
	bool dydrbytvzvaeam = false;
	double tscdammz = 36216;
	double fennubbqti = 6484;
	bool iyuics = true;
	int fbgwsbdo = 1698;
	int lbttk = 2029;
	bool pqjoo = true;
	double rmvoklgoi = 65025;
	double vvzkg = 22097;
	if (false != false) {
		int wyrtpadlfq;
		for (wyrtpadlfq = 51; wyrtpadlfq > 0; wyrtpadlfq--) {
			continue;
		}
	}
	if (true == true) {
		int bexadqu;
		for (bexadqu = 60; bexadqu > 0; bexadqu--) {
			continue;
		}
	}
	if (true != true) {
		int qm;
		for (qm = 21; qm > 0; qm--) {
			continue;
		}
	}
	if (2029 == 2029) {
		int fi;
		for (fi = 16; fi > 0; fi--) {
			continue;
		}
	}
	if (65025 == 65025) {
		int qigyzzug;
		for (qigyzzug = 60; qigyzzug > 0; qigyzzug--) {
			continue;
		}
	}
	return string("wzkxplotodg");
}

string gysvgai::itvjnrbepqmofywga(double dlanthhzxces, int rsypbtvbeifag, double mliiddae, string pwnztozykarhtv, int qyrysjsdtwzazjn, bool vwtszmbz, double vkckb, string myhzuxcou) {
	return string("uwdismuqkfaln");
}

double gysvgai::ucsnmcgksgnwlybvhyfkfzvs(int klgux, double dwarbvdi, bool pcnbxrdrndxio, bool zbawwkjwbb, string udhrbsqcuccwnmw) {
	int zpneevl = 7389;
	double guzkpps = 40679;
	double kmehknmlsfjsmp = 2355;
	double cfknvravr = 2474;
	bool kkpopznvdepqi = true;
	bool ellgjlxqzuar = false;
	int eddfybtjbwzbg = 2081;
	string eakidtemzwmr = "cqfxwovhwycrzxtljpw";
	double qajxgfbqgsxejts = 54720;
	string tdlpggkbiwogoqy = "wbnueknsygiptvbqooaohsjiduvmwpsncugsmqvgwnfwbspnzcajpctdeexonscstuhiwjtdtxqgpumnsaypromwkikzmnfv";
	if (54720 == 54720) {
		int bztvbeck;
		for (bztvbeck = 80; bztvbeck > 0; bztvbeck--) {
			continue;
		}
	}
	return 33882;
}

int gysvgai::ulnmhsdbpnebkdcfe(bool kxlsdlch, double ismepqxukm, bool wizrnbbd, bool vuzflhbasjdu, string eerrngl, bool zvsdinfpb, double ijpkguloeh, int hjspbc, int smtvabjunxqv, int qogkltxaqxys) {
	int chicbjpbxrettj = 3783;
	double mqsny = 41154;
	string pkndhc = "usmdapqplblgpossbwfqsowurzkohucijfeylqkdbeowghu";
	bool plaehgnokhxx = false;
	if (41154 == 41154) {
		int vd;
		for (vd = 53; vd > 0; vd--) {
			continue;
		}
	}
	if (3783 == 3783) {
		int unbmgao;
		for (unbmgao = 48; unbmgao > 0; unbmgao--) {
			continue;
		}
	}
	if (string("usmdapqplblgpossbwfqsowurzkohucijfeylqkdbeowghu") != string("usmdapqplblgpossbwfqsowurzkohucijfeylqkdbeowghu")) {
		int hgzoyz;
		for (hgzoyz = 51; hgzoyz > 0; hgzoyz--) {
			continue;
		}
	}
	if (string("usmdapqplblgpossbwfqsowurzkohucijfeylqkdbeowghu") == string("usmdapqplblgpossbwfqsowurzkohucijfeylqkdbeowghu")) {
		int twelaef;
		for (twelaef = 15; twelaef > 0; twelaef--) {
			continue;
		}
	}
	return 26410;
}

double gysvgai::ueuemwuvptbajaorkyzunpaa(int asqvhflfzyi, double cvzlw, double lgmwuwtiivoi, string zhhwgpzoq, int nwipffzgs, double mwufidyvdv, double sslkkhblvxtevrg, int zpigb, double vtguwwfbfhg, string omhbcfmi) {
	string cqjjynkcgfnywhf = "bollfgnvbyhbteruvkkbtxssjxzvjirskbtxvorb";
	double wlgoy = 61700;
	double yoforesarnxa = 96442;
	bool cnvykqla = false;
	int irlgpi = 451;
	string rabkkupjz = "slhbogxfktmzrxmlalbwyqxcrdybbgjfmsxgjhq";
	string sykqkmegj = "syygieevhlvktargsdezqrobxels";
	if (451 == 451) {
		int qxcmebhwso;
		for (qxcmebhwso = 58; qxcmebhwso > 0; qxcmebhwso--) {
			continue;
		}
	}
	if (string("bollfgnvbyhbteruvkkbtxssjxzvjirskbtxvorb") == string("bollfgnvbyhbteruvkkbtxssjxzvjirskbtxvorb")) {
		int kpfbon;
		for (kpfbon = 40; kpfbon > 0; kpfbon--) {
			continue;
		}
	}
	if (string("bollfgnvbyhbteruvkkbtxssjxzvjirskbtxvorb") == string("bollfgnvbyhbteruvkkbtxssjxzvjirskbtxvorb")) {
		int hganszsc;
		for (hganszsc = 77; hganszsc > 0; hganszsc--) {
			continue;
		}
	}
	if (96442 != 96442) {
		int vease;
		for (vease = 76; vease > 0; vease--) {
			continue;
		}
	}
	return 73893;
}

void gysvgai::zxiohgjwbnlsimtrpoqp(bool vmnrjz) {
	double ejigzxinxipxjnc = 4345;
	string allwuloqa = "clphyiqbajmtbpizjhcrhfaxzzefkzqkeiakoozcvdbceuunbfrssizvn";
	bool mlcrprftssq = true;
	bool rwtnbnjoaph = false;
	double qvmzlene = 18229;
	int leeurvxxzv = 4926;
	int njzvneufvefjo = 3372;
	if (4926 != 4926) {
		int pusscegf;
		for (pusscegf = 0; pusscegf > 0; pusscegf--) {
			continue;
		}
	}

}

int gysvgai::zalslwvnitwb(bool wuhedlwqgm, bool febimfahc, int qtguvumeaprqtiy, string xzeovngthuyshaz, double ngeokqxbp, string pbelworlectlf, int tsqalmgdq, bool dbcyxjcnd, double uarnvyvldqwfx, string vhblolnjakqb) {
	string ntjhhsjgwkpamqw = "lgytwsidqlcquegptybxmganukdecfxuwsykyaayvavdhieslumhppaklmkyuohwaxmldxbwtixeavhfgpychhztozznwnkvxyut";
	int ygarjxa = 2071;
	int jffzdaz = 2590;
	double adxipfo = 37675;
	bool xpxuulqstgas = true;
	bool jmejvscm = true;
	bool aljphkknr = false;
	if (false != false) {
		int hobluurrj;
		for (hobluurrj = 91; hobluurrj > 0; hobluurrj--) {
			continue;
		}
	}
	if (2590 != 2590) {
		int lezx;
		for (lezx = 61; lezx > 0; lezx--) {
			continue;
		}
	}
	if (true == true) {
		int vlae;
		for (vlae = 9; vlae > 0; vlae--) {
			continue;
		}
	}
	if (true == true) {
		int ml;
		for (ml = 82; ml > 0; ml--) {
			continue;
		}
	}
	if (2590 != 2590) {
		int elxjnwaihl;
		for (elxjnwaihl = 86; elxjnwaihl > 0; elxjnwaihl--) {
			continue;
		}
	}
	return 47251;
}

int gysvgai::toqnqpvhzojgycgadbuxupmtx(string ynlroxp, int ydsxrpwdvsywr, string buolnoqwn, double bwszwmbaizsd, int rvnimgfoefmk, string ajsswewbfd) {
	double facmvr = 38328;
	double tppfs = 28514;
	double ccaadsfi = 12943;
	return 9935;
}

string gysvgai::oqrocgyumijmnj(double qbvxbxj, double jwqpj, int nhvxbcumlhuqc, string tbuxxn) {
	double uqmreovmosx = 4355;
	if (4355 != 4355) {
		int lkdxlfugg;
		for (lkdxlfugg = 23; lkdxlfugg > 0; lkdxlfugg--) {
			continue;
		}
	}
	if (4355 == 4355) {
		int cxyn;
		for (cxyn = 58; cxyn > 0; cxyn--) {
			continue;
		}
	}
	if (4355 != 4355) {
		int tujxetzpuk;
		for (tujxetzpuk = 83; tujxetzpuk > 0; tujxetzpuk--) {
			continue;
		}
	}
	if (4355 == 4355) {
		int xmocszfsv;
		for (xmocszfsv = 15; xmocszfsv > 0; xmocszfsv--) {
			continue;
		}
	}
	return string("upfkt");
}

void gysvgai::bratjhztvobbwhp(int jmxpzap, bool rnuckub, string rjdkq) {

}

string gysvgai::seomrnjlfg(int pszdkkzdtn, double omofezshcotd, string yjuzel, bool ectljinpvinna) {
	double lpgowpx = 55955;
	bool eegumhuafwfgn = false;
	double zoytuz = 3783;
	int geisiubuw = 939;
	bool djsvtfdonjbzory = false;
	bool xknav = false;
	int aysmszlhaa = 3422;
	double mamhus = 13860;
	if (13860 == 13860) {
		int cagsdg;
		for (cagsdg = 53; cagsdg > 0; cagsdg--) {
			continue;
		}
	}
	return string("ngtl");
}

int gysvgai::vxehgoubzxijyzvnr(bool fxvavukrw, double wmvdlg, bool thglobget, int rhleltdxsdznkbt, double drbxfee, double xrwvrsr, string vyowho, string otzvduskmgrj, bool rxztmbdww, int evmvajmzkhde) {
	string qzzknrfa = "lufzjievpqqzpaddducerdwstjxbgsrtuqxhifhyuie";
	double ototoi = 2181;
	string qqpcag = "oosbrvoilrtihugtcktvhnivmlfhbfgvdhyuktcbxs";
	if (2181 != 2181) {
		int ypokijnus;
		for (ypokijnus = 99; ypokijnus > 0; ypokijnus--) {
			continue;
		}
	}
	if (2181 == 2181) {
		int jydkgyzr;
		for (jydkgyzr = 0; jydkgyzr > 0; jydkgyzr--) {
			continue;
		}
	}
	if (string("lufzjievpqqzpaddducerdwstjxbgsrtuqxhifhyuie") == string("lufzjievpqqzpaddducerdwstjxbgsrtuqxhifhyuie")) {
		int cklcmjilc;
		for (cklcmjilc = 32; cklcmjilc > 0; cklcmjilc--) {
			continue;
		}
	}
	if (2181 == 2181) {
		int zoumgyx;
		for (zoumgyx = 76; zoumgyx > 0; zoumgyx--) {
			continue;
		}
	}
	if (string("oosbrvoilrtihugtcktvhnivmlfhbfgvdhyuktcbxs") == string("oosbrvoilrtihugtcktvhnivmlfhbfgvdhyuktcbxs")) {
		int pmzmcpr;
		for (pmzmcpr = 55; pmzmcpr > 0; pmzmcpr--) {
			continue;
		}
	}
	return 27384;
}

int gysvgai::afrvcvqolejtn(int zdoxzte, double ickze, int qiaqfrrcuryoark, bool aalcqj, string odohjemmkm, int hawpgdsim, double pkudssqr, string tojctzcxdabab) {
	double bfppgoftlyq = 23741;
	string iwpjdtslu = "";
	double wjolc = 19623;
	double ooaaw = 2883;
	double wsduk = 39505;
	string ohoyzrrja = "zxjrmvvaskrnjvuxdmbgayafnxkxpjgyqyqaicihkhmm";
	int jvkqwbrqu = 4174;
	bool jopbxuhpjxk = false;
	return 91418;
}

gysvgai::gysvgai() {
	this->afrvcvqolejtn(1247, 38845, 9243, false, string("iznhnnojjxkoqlsevyazivmnqyizvksltcucuhht"), 5513, 33815, string("wniygop"));
	this->bratjhztvobbwhp(336, false, string("parviqwlhxuqfrllibpmvcqruwmffdzqjaitnjwcmgfttdkknolpcvudji"));
	this->seomrnjlfg(1095, 13303, string("rsrjbqilofbgohejiuhqjjsrgqnhejexzarkqkbmkslueiqrxkzjfqksvsnnmhg"), false);
	this->vxehgoubzxijyzvnr(false, 14048, false, 389, 30583, 13429, string("bpghbplwzndcynzsnqcdtfpdzbotbphnwhfpuuylyqivnpegqflophvkikaeyfedctjhb"), string("xhxrcbffyznmtgcmpprionvqnvptebrryqgvtqqgloclgobhenqdwcrpdqzonpmclalfmtivjbgyreppwdhdkpjjrfmskylue"), false, 2641);
	this->xjtxqtpeaauxnlyesjir(string("fjecmwhzlqaqryuznet"), 5862, 91);
	this->furaneckiblhnqrojmm(3967, string("zywpmjcbjnojetkbxefrmauahegcrwksukksqzrfnljwiocczgncopvixnemirlhnonsxtvlxw"), false, string("qdqioswuwyirsqcmhnnvrxgfriowtowwkcvcca"), 19665, string("eyhgmmifwivfrwzzyqbmfumqmcxwhvwrvfmcnlnezoofjyunisrzejqbwbgslwteeenrbxebxejty"), 47858, 3054, 2008);
	this->itvjnrbepqmofywga(30446, 4768, 73163, string("rumdkoitdicvvfnzktdjoujhuhztygddmcnbvcmxzttxkweqtnzawxgcfeurksnxmgjnkcvaszhoqvzvcmqhizljvxueayykw"), 1555, true, 8544, string("ospothwdpbxwugcuvzivlwmunqqhekxvpvhhpqdfgrcfzfrekoduvdxbavhxquiimmtgponnhvizjazqcirarfhabztzacp"));
	this->ucsnmcgksgnwlybvhyfkfzvs(5894, 25270, false, false, string("glcqdkrsfmqxerdts"));
	this->ulnmhsdbpnebkdcfe(true, 3689, false, true, string("vgkhuoyrniqvubxuvwsdwbtgisstoecpzjwvnrvxdsbicmtlxjcczoatjdl"), true, 13495, 3295, 2461, 1985);
	this->ueuemwuvptbajaorkyzunpaa(999, 50097, 54615, string("rukvekcmrxkwbpybqrrrpdunyvjlvou"), 1449, 8464, 10154, 1139, 11133, string("vnjavdcohbfygh"));
	this->zxiohgjwbnlsimtrpoqp(true);
	this->zalslwvnitwb(true, false, 2057, string("djckncidlrgsnhftuihlclqwwmlpmoffjmonydufmowtbrvbbvvhneajmtompovjpjvopg"), 70, string("mjrkijclvgkxngkmrbccgmxlhnmipnflgkhsphceplxgzrqbhqnlsdsslhhetpj"), 1983, true, 2650, string("sfqf"));
	this->toqnqpvhzojgycgadbuxupmtx(string("yswpbogxcslvtivgnfibfqmvnvouvzhkyepftesspohwkldjustikbgjkmmbyhfrgyrfltnmlvkwzddbmqhnyukxxxftsez"), 548, string("aquhspxkhwofqrqk"), 6729, 1404, string("tmrocxbjrvuevhymqxkjpiablzkreeszqtdbvaaxqfivknvslrwympgwylsnqbbenmhgbttvohvbieqzsxfzjbjykyd"));
	this->oqrocgyumijmnj(1794, 14788, 6218, string("hgtizvb"));
}



inline bool CGameTrace::DidHitWorld() const
{
	return m_pEntity->GetIndex() == 0;

}

inline bool CGameTrace::DidHitNonWorldEntity() const
{
	return m_pEntity != NULL && !DidHitWorld();

}

bool HandleBulletPenetration(CSWeaponInfo *wpn_data, FireBulletData &data);

float GetHitgroupDamageMult(int iHitGroup)
{
	switch (iHitGroup)
	{
	case HITGROUP_GENERIC:
		return 1.0f;
	case HITGROUP_HEAD:
		return 2.0f;
	case HITGROUP_CHEST:
		return 1.0f;
	case HITGROUP_STOMACH:
		return 1.5f;
	case HITGROUP_LEFTARM:
		return 1.0f;
	case HITGROUP_RIGHTARM:
		return 1.0f;
	case HITGROUP_LEFTLEG:
		return 0.75f;
	case HITGROUP_RIGHTLEG:
		return 0.75f;
	case HITGROUP_GEAR:
		return 1.0f;
	default:
		break;
	}

	return 1.0f;
}

void ScaleDamage(int hitgroup, IClientEntity *enemy, float weapon_armor_ratio, float &current_damage)
{
	current_damage *= GetHitgroupDamageMult(hitgroup);

	if (enemy->ArmorValue() > 0)
	{
		if (hitgroup == HITGROUP_HEAD)
		{
			if (enemy->HasHelmet())
				current_damage *= (weapon_armor_ratio);
		}
		else
		{
			current_damage *= (weapon_armor_ratio);
		}
	}
}

bool SimulateFireBullet(IClientEntity *local, CBaseCombatWeapon *weapon, FireBulletData &data)
{

	data.penetrate_count = 4; 
	data.trace_length = 0.0f;
	auto *wpn_data = weapon->GetCSWpnData(); 
	data.current_damage = (float)wpn_data->m_iDamage;
	while ((data.penetrate_count > 0) && (data.current_damage >= 1.0f))
	{
		data.trace_length_remaining = wpn_data->m_flRange - data.trace_length;
		Vector End_Point = data.src + data.direction * data.trace_length_remaining;
		UTIL_TraceLine(data.src, End_Point, 0x4600400B, local, 0, &data.enter_trace);
		UTIL_ClipTraceToPlayers(data.src, End_Point * 40.f, 0x4600400B, &data.filter, &data.enter_trace);
		if (data.enter_trace.fraction == 1.0f) break;
		if ((data.enter_trace.hitgroup <= 7) && (data.enter_trace.hitgroup > 0) && (local->GetTeamNum() != data.enter_trace.m_pEntity->GetTeamNum()))
		{
			data.trace_length += data.enter_trace.fraction * data.trace_length_remaining;
			data.current_damage *= pow(wpn_data->m_flRangeModifier, data.trace_length * 0.002);
			ScaleDamage(data.enter_trace.hitgroup, data.enter_trace.m_pEntity, wpn_data->m_flArmorRatio, data.current_damage);
			return true;
		}
		if (!HandleBulletPenetration(wpn_data, data)) break;
	}
	return false;
}



bool HandleBulletPenetration(CSWeaponInfo *wpn_data, FireBulletData &data)
{

	surfacedata_t *enter_surface_data = Interfaces::PhysProps->GetSurfaceData(data.enter_trace.surface.surfaceProps);
	int enter_material = enter_surface_data->game.material;
	float enter_surf_penetration_mod = enter_surface_data->game.flPenetrationModifier;
	data.trace_length += data.enter_trace.fraction * data.trace_length_remaining;
	data.current_damage *= pow(wpn_data->m_flRangeModifier, (data.trace_length * 0.002));
	if ((data.trace_length > 3000.f) || (enter_surf_penetration_mod < 0.1f))data.penetrate_count = 0;
	if (data.penetrate_count <= 0)return false;
	Vector dummy;
	trace_t trace_exit;
	if (!TraceToExit(dummy, data.enter_trace, data.enter_trace.endpos, data.direction, &trace_exit)) return false;
	surfacedata_t *exit_surface_data = Interfaces::PhysProps->GetSurfaceData(trace_exit.surface.surfaceProps);
	int exit_material = exit_surface_data->game.material;
	float exit_surf_penetration_mod = exit_surface_data->game.flPenetrationModifier;
	float final_damage_modifier = 0.16f;
	float combined_penetration_modifier = 0.0f;
	if (((data.enter_trace.contents & CONTENTS_GRATE) != 0) || (enter_material == 89) || (enter_material == 71)) { combined_penetration_modifier = 3.0f; final_damage_modifier = 0.05f; }
	else { combined_penetration_modifier = (enter_surf_penetration_mod + exit_surf_penetration_mod) * 0.5f; }
	if (enter_material == exit_material)
	{
		if (exit_material == 87 || exit_material == 85)combined_penetration_modifier = 3.0f;
		else if (exit_material == 76)combined_penetration_modifier = 2.0f;
	}
	float v34 = fmaxf(0.f, 1.0f / combined_penetration_modifier);
	float v35 = (data.current_damage * final_damage_modifier) + v34 * 3.0f * fmaxf(0.0f, (3.0f / wpn_data->m_flPenetration) * 1.25f);
	float thickness = VectorLength(trace_exit.endpos - data.enter_trace.endpos);
	thickness *= thickness;
	thickness *= v34;
	thickness /= 24.0f;
	float lost_damage = fmaxf(0.0f, v35 + thickness);
	if (lost_damage > data.current_damage)return false;
	if (lost_damage >= 0.0f)data.current_damage -= lost_damage;
	if (data.current_damage < 1.0f) return false;
	data.src = trace_exit.endpos;
	data.penetrate_count--;

	return true;
}

bool CanHit(const Vector &point, float *damage_given)
{
	auto *local = Interfaces::EntList->GetClientEntity(Interfaces::Engine->GetLocalPlayer());
	auto data = FireBulletData(local->GetOrigin() + local->GetViewOffset());
	data.filter = CTraceFilter();
	data.filter.pSkip = local;

	Vector angles;
	CalcAngle(data.src, point, angles);
	AngleVectors(angles, &data.direction);
	VectorNormalize(data.direction);

	if (SimulateFireBullet(local, (CBaseCombatWeapon*)Interfaces::EntList->GetClientEntityFromHandle((HANDLE)local->GetActiveWeaponHandle()), data))
	{
		*damage_given = data.current_damage;
		return true;
	}

	return false;
}